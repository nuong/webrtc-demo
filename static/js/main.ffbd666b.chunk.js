(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{15:function(e,c,t){},16:function(e,c,t){},36:function(e,c,t){},38:function(e,c,t){},39:function(e,c,t){"use strict";t.r(c);var a=t(1),n=t.n(a),A=t(10),i=t.n(A),l=(t(15),t(2)),o=t(4),r=(t(16),t(3)),s=t(6),j=(t(36),t(0));var d=function(e){var c=e.srcObject,t=e.muted,A=void 0!==t&&t,i=n.a.useState(!0),o=Object(l.a)(i,2),r=o[0],s=o[1],d=Object(a.useRef)(null);return Object(a.useEffect)((function(){c?(d.current.srcObject=c,d.current.play(),s(!1)):d.current.srcObject=null}),[null===c||void 0===c?void 0:c.id]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("video",{className:"sw-Camera",ref:d,autoPlay:!0,playsInline:!0,muted:A}),r&&Object(j.jsx)("div",{className:"camera-loading",children:"Loading..."})]})};t(38);var b=function(){return Object(j.jsx)("div",{className:"sw-CallingAnimate"})};var u,O,p=function(e){var c=e.audioSrc,t=e.loop,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){n.current&&(c?(n.current.src=c,n.current.play(),n.current.loop=t):(n.current.src="",n.current.pause()))}),[c,t]),Object(j.jsx)("audio",{autoPlay:!0,loop:!0,ref:n,children:Object(j.jsx)("source",{src:c,type:"audio/mpeg"})})},m=t.p+"static/media/phone-calling.e5f03ead.mp3";!function(e){e[e.START=0]="START",e[e.WAITING=1]="WAITING",e[e.IN_CALL=2]="IN_CALL",e[e.END=3]="END"}(u||(u={})),function(e){e.CALL="call",e.JOIN="join"}(O||(O={}));var x=function(){var e=new URL(window.location.href);return{roomId:e.searchParams.get("roomId")||"",token:e.searchParams.get("token")||"",mode:e.searchParams.get("mode")}}(),g=new s.TrueIDClient,f=null;function I(e){Object(o.a)(e);var c=Object(a.useState)(null),t=Object(l.a)(c,2),n=t[0],A=t[1],i=Object(a.useState)(null),I=Object(l.a)(i,2),h=I[0],R=I[1],N=Object(a.useState)(!0),C=Object(l.a)(N,2),B=C[0],v=C[1],k=Object(a.useState)(!0),S=Object(l.a)(k,2),D=S[0],W=S[1],T=Object(a.useState)(u.START),E=Object(l.a)(T,2),Q=E[0],w=E[1],H=Object(a.useState)({src:"",loop:!1}),F=Object(l.a)(H,2),P=F[0],y=F[1],X=Object(a.useState)(!1),Y=Object(l.a)(X,2),M=Y[0],L=Y[1],G=Object(a.useCallback)((function(){var e,c,t,a,n,i;null===(e=f)||void 0===e||e.on("addLocalStream",(function(e){R(e)})),null===(c=f)||void 0===c||c.on("addRemoteStream",(function(e){console.log("addRemoteStream",e),A(e)})),null===(t=f)||void 0===t||t.on("ringing",(function(){w(u.WAITING),y({loop:!0,src:m})})),null===(a=f)||void 0===a||a.on("accepted",(function(){w(u.IN_CALL),y({src:"",loop:!1}),console.log("accepted")})),null===(n=f)||void 0===n||n.on("joined",(function(){w(u.IN_CALL),y({src:"",loop:!1})})),null===(i=f)||void 0===i||i.on("ended",(function(){U()}))}),[]);Object(a.useEffect)((function(){if(!x.token)return console.error("Token is required");g.connect(x.token,1,"wss://videocall-stag.trueid.vn/ws2"),g.on("authen",(function(){f=new s.TrueIDCaller(g),G(),L(!0),f.getLocalVideoStream()}))}),[]);var U=function(){y({src:"",loop:!1}),w(u.END)},Z=Object(a.useCallback)((function(){var e;null===(e=f)||void 0===e||e.makeCall()}),[]),q=Object(a.useCallback)((function(){var e;null===(e=f)||void 0===e||e.joinCall(x.roomId)}),[]),V=function(){var e,c=!D;W(c),null===(e=f)||void 0===e||e.enableLocalVideo(c)},J=function(){var e,c=!B;v(c),null===(e=f)||void 0===e||e.mute(c)},z=Object(a.useCallback)((function(){var e,c;x.mode===O.CALL?null===(e=f)||void 0===e||e.hangup():null===(c=f)||void 0===c||c.leaveRoom();U()}),[]);return Object(j.jsxs)("div",{className:"app-Wrapper",children:[Q!==u.END&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"app-Wrapper_Stream",children:[Object(j.jsx)("div",{className:Q!==u.START?"app-Wrapper_StreamLocal app-Wrapper_StreamLocal-fixed":"app-Wrapper_StreamLocal",children:Object(j.jsxs)("div",{className:"app-Wrapper_StreamLocalWrapper",children:[Object(j.jsx)(d,{srcObject:h,muted:!0}),Q===u.START&&Object(j.jsxs)("div",{className:"app-Wrapper_StreamLocalWrapperActions",children:[Object(j.jsx)("button",{className:"btn-icon mic",disabled:!h,onClick:J,children:B?Object(j.jsx)(r.d,{}):Object(j.jsx)(r.e,{})}),Object(j.jsx)("button",{className:"btn-icon cam",disabled:!h,onClick:V,children:D?Object(j.jsx)(r.f,{}):Object(j.jsx)(r.g,{})}),x.mode===O.CALL&&Object(j.jsx)("button",{className:"btn-icon call",disabled:!M,onClick:Z,children:Object(j.jsx)(r.b,{})}),x.mode===O.JOIN&&Object(j.jsx)("button",{className:"btn-icon call",disabled:!M||!x.roomId,onClick:q,children:Object(j.jsx)(r.a,{})})]})]})}),Q!==u.START&&Object(j.jsxs)("div",{className:"app-Wrapper_StreamRemote",children:[n&&Object(j.jsx)(d,{srcObject:n}),Q===u.WAITING&&Object(j.jsx)("div",{className:"app-Wrapper_StreamRemoteWaiting",children:Object(j.jsx)("div",{className:"app-Wrapper_StreamRemoteWaitingContent",children:Object(j.jsx)(b,{})})}),Object(j.jsxs)("div",{className:"app-Wrapper_StreamLocalWrapperActions",children:[Object(j.jsx)("button",{className:"btn-icon mic",onClick:J,children:B?Object(j.jsx)(r.d,{}):Object(j.jsx)(r.e,{})}),Object(j.jsx)("button",{className:"btn-icon cam",onClick:V,children:D?Object(j.jsx)(r.f,{}):Object(j.jsx)(r.g,{})}),Object(j.jsx)("button",{className:"btn-icon end-call",onClick:z,children:Object(j.jsx)(r.c,{})})]})]})]}),Object(j.jsx)(p,{audioSrc:P.src,loop:P.loop})]}),Q===u.END&&Object(j.jsx)("div",{children:"Call ended"})]})}function h(e){Object(o.a)(e);var c=Object(a.useState)(null),t=Object(l.a)(c,2),n=t[0];t[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"app-Logo",children:Object(j.jsx)("img",{src:"data:image/png;base64,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",alt:"logo"})}),Object(j.jsx)(I,{localStream:n})]})}i.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(h,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.ffbd666b.chunk.js.map